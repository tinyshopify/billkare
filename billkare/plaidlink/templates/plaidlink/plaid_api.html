<!DOCTYPE html>
<html lang="en">
{%load static %}

<head>
    <meta charset="utf-8">
    
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">
     <!-- Favicon -->
     
     <link href="images/favicon.ico" rel="icon">

  <!-- Google Web Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;600&family=Nunito:wght@600;700;800&display=swap" rel="stylesheet">
 
  <!-- Icon Font Stylesheet -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">
 
  <!-- Libraries Stylesheet -->
  <link href="{% static 'lib/animate/animate.min.css' %}" rel="stylesheet">
  <link href="{% static 'lib/owlcarousel/assets/owl.carousel.min.css' %}" rel="stylesheet">
  
    <!-- Customized Bootstrap Stylesheet -->
    <link href="{%static 'css/bootstrap.min.css' %}" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="{%static 'css/style.css' %}" rel="stylesheet">
  
</head>


<body>
    <div class="content">
        <!-- Navbar Starts-->
    <nav class="navbar navbar-expand-lg navbar-light sticky-top  box-shadow mb-3 p-0">
        <a href="{% url 'home' %}" class="navbar-brand d-flex align-items-center px-4 px-lg-5 py-lg-0">
            <h2 class="m-0 text-success "><i class="fa fa-book me-3"></i>Catche</h2>
        </a>
        <button type="button" class="navbar-toggler me-4" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
            <span class="navbar-toggler-icon"></span>
        </button>
    
        <div class="collapse navbar-collapse" id="navbarCollapse">
            <div class="navbar-nav  ms-auto p-4 p-lg-0">
                <a href="{% url 'home' %}" class="nav-item nav-link ">Home</a>
                <a href="{% url 'LoginPage' %}" class="nav-item nav-link">Login</a>
                
            </div>
          
           
        </div>
    </nav>
  <!-- Navbar End -->
</div>




<div class="container">
 
  <div style="margin-top:30px;" class="row">
    <h5><a  class="nav-item nav-link " href= "{% url 'LoginPage' %}">connecting with Plaid,After connecting bank login to catche </a></h5>
    <div class="col-sm-6">
      <div class="bill">
        <div class="card align-items-center mx-auto mt-7">
            <div class="card-body justify-content-center ">
            <h5 class="mb-4">Check how catch will help you:</h5>
                <div class="card-text mb-4">
                    <label class="col" for="check_1" >1. Catche will monitor your transactions and detect any potential cash shortage in your connected bank account
                    </label>
                </div>
                <div class="card-text mb-4">
                  
                    <label class="col" for="check_2" >2.You have a choice of becoming our subscribers. For subscribers, you will choose ONE bill you would like to fund each month.
                    </label>
                </div>
                <div class="card-text mb-4">
                   
                    <label class="col" for="check_3" >3.We will match you the $ amount(up to $800 if your are premium member, and upto $300 if your are basic member) you will pay that bill. Your portion of the payment will be withdrew from your connected bank account by us with your agreement and we will send it along with our portion to your biller.
                    </label>
                </div>
                <div class="card-text mb-4">
                  
                    <label class="col" for="check_2" >4. In your next payday, fund will be automatically withdrew from your account to repay us.

                    </label>
                </div>
        
            </div>
        </div>

        </div>
    
          
       </div>
            <div class="col-sm-6">
              <img style="width:100%" src="{% static 'images/bank_america.png' %}" style="width:100%;">
              
        </div>
    </div>
    </div>
<br>

<script src="https://cdn.plaid.com/link/v2/stable/link-initialize.js"></script>
<script type="text/javascript">



function getCookie(name) {
      let cookieValue = null;
      if (document.cookie && document.cookie !== "") {
        const cookies = document.cookie.split(";");
        for (let i = 0; i < cookies.length; i++) {
          const cookie = cookies[i].trim();
          // Does this cookie string begin with the name we want?
          if (cookie.substring(0, name.length + 1) === name + "=") {
            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
            break;
          }
        }
      }
      return cookieValue;
    }

    const csrftoken = getCookie("csrftoken");


const myHeaders = new Headers({
      "X-CSRFToken": csrftoken,
    });



const handler = Plaid.create({
  token: '{{ link_token }}',
  onSuccess: (public_token, metadata) => {
  fetch("/plaidlink/exchange_public_token/" + public_token,{
            method: "POST",
            headers: myHeaders,
          });
  },
  onLoad: () => {},
  onExit: (err, metadata) => { },
  onEvent: (eventName, metadata) => {},

});

handler.open()
</script>


</body>
</html>